{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neal Cronin | Portfolio</title>
    <meta property="og:image" content="https://res.cloudinary.com/dmo5atv6g/image/upload/v1767599138/IMG_8958_itluci.jpg">
    <meta property="og:title" content="Neal Cronin | Portfolio">
    <meta property="og:description" content="A showcase of my projects and skills.">

    <style>
        nav a, .nav-links a { color: var(--text-color, #444); text-decoration: none; }
    </style>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body id="theme-body">

    <nav>
        <div class="nav-logo">
            <a href="/">Neal Cronin</a>
        </div>

        <div class="nav-center">
            <button id="theme-toggle" class="theme-btn">Dark Mode</button>
        </div>

        <ul class="nav-links">
            <li><a href="{% url 'home' %}" class="{% if request.path == '/' %}active{% endif %}">Projects</a></li>
            <li><a href="{% url 'about' %}" class="{% if request.path == '/about/' %}active{% endif %}">Me</a></li>
            <li><a href="{% url 'resume' %}" class="btn-resume {% if request.path == '/resume/' %}active{% endif %}">Resume</a></li>
        </ul>
    </nav>

    <main class="container">
        {% block content %}
        {% endblock %}
    </main>

    <script>
        const btn = document.getElementById('theme-toggle');
        const body = document.getElementById('theme-body');

        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark') {
            body.classList.add('dark-mode');
            btn.textContent = 'Light Mode';
        } else {
            body.classList.remove('dark-mode');
            btn.textContent = 'Dark Mode';
        }

        btn.addEventListener('click', function() {
            body.classList.toggle('dark-mode');
            let theme = 'light';
            if (body.classList.contains('dark-mode')) {
                theme = 'dark';
                btn.textContent = 'Light Mode';
            } else {
                btn.textContent = 'Dark Mode';
            }
            localStorage.setItem('theme', theme);
        });
    </script>
    <script>
    // Create the observer
    const observerOptions = {
        root: null, // use the viewport
        rootMargin: '-20% 0px -20% 0px', // trigger when card is in the middle 60% of screen
        threshold: 0.7 // card must be 70% visible to trigger
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-focused');
            } else {
                entry.target.classList.remove('is-focused');
            }
        });
    }, observerOptions);

    // Target all project cards
    document.querySelectorAll('.project-card').forEach(card => {
        observer.observe(card);
    });
</script>
</body>
</html>